<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Sharing Notebooks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="Intro_files/libs/clipboard/clipboard.min.js"></script>
<script src="Intro_files/libs/quarto-html/quarto.js"></script>
<script src="Intro_files/libs/quarto-html/popper.min.js"></script>
<script src="Intro_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Intro_files/libs/quarto-html/anchor.min.js"></script>
<link href="Intro_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Intro_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Intro_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Intro_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Intro_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="Intro_files/libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="Intro_files/libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="Intro_files/libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#about" id="toc-about" class="nav-link active" data-scroll-target="#about">About</a></li>
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites">Prerequisites</a></li>
  <li><a href="#creating-a-repository-on-github" id="toc-creating-a-repository-on-github" class="nav-link" data-scroll-target="#creating-a-repository-on-github">Creating a repository on GitHub</a></li>
  <li><a href="#cloning-to-a-local-directory" id="toc-cloning-to-a-local-directory" class="nav-link" data-scroll-target="#cloning-to-a-local-directory">Cloning to a local directory</a></li>
  <li><a href="#updating-the-local-files" id="toc-updating-the-local-files" class="nav-link" data-scroll-target="#updating-the-local-files">Updating the local files</a></li>
  <li><a href="#creating-a-quarto-document" id="toc-creating-a-quarto-document" class="nav-link" data-scroll-target="#creating-a-quarto-document">Creating a Quarto Document</a></li>
  <li><a href="#pushing-it-back-to-github" id="toc-pushing-it-back-to-github" class="nav-link" data-scroll-target="#pushing-it-back-to-github">Pushing it back to GitHub</a></li>
  <li><a href="#in-case-of-problems" id="toc-in-case-of-problems" class="nav-link" data-scroll-target="#in-case-of-problems">In case of problems</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Sharing Notebooks</h1>
<p class="subtitle lead">How to create a Quarto-based notebook using Visual Studio Code and share it in GitHub</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="about" class="level1">
<h1>About</h1>
<p>This document shows the steps required to create a GitHub repository, create a site based on it, clone the repository, add content using Visual Study Code and Quatro and push it back to GitHub so the content can be served as an interactive notebook.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>This document is still under construction! Come back in a few days.</p>
</div>
</div>
</section>
<section id="prerequisites" class="level1">
<h1>Prerequisites</h1>
<ul>
<li>Have a <a href="https://github.com">GitHub account</a> configured so you can connect via SSH (see <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh">Connecting to GitHub with SSH</a> and <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account">Adding a new SSH key to your GitHub account</a>, and <a href="https://stackoverflow.com/questions/14762034/push-to-github-without-a-password-using-ssh-key">Push to GitHub without a password using ssh-key</a> in case of errors).</li>
<li>Install the <a href="https://quarto.org/docs/get-started/">Quarto</a> document authoring system.</li>
<li>Install the <a href="https://code.visualstudio.com/download">Visual Studio Code</a> Integrated Development Environment (IDE) and the <a href="https://marketplace.visualstudio.com/items?itemName=quarto.quarto">Quarto VS Code Extension</a>.</li>
</ul>
</section>
<section id="creating-a-repository-on-github" class="level1">
<h1>Creating a repository on GitHub</h1>
<p>Go to your <a href="https://github.com">GitHub account</a>, click on the Plus icon (see Figure <a href="#fig-github">GitHub main window</a>) and create a New Repository (1).</p>
<div id="fig-github" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-github-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Resources/github.webp" class="lightbox" data-glightbox="description: .lightbox-desc-1" data-gallery="quarto-lightbox-gallery-1"><img src="Resources/github.webp" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-github-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: GitHub main window
</figcaption>
</figure>
</div>
<p>Figure <a href="#fig-newrepo-empty">Creating a new repository</a> shows the page that asks for the new repository information. Fill the repository name (2), choose <code>Add a README file</code> (3) and choose a license (4).</p>
<div id="fig-newrepo-empty" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-newrepo-empty-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Resources/newrepo-empty.webp" class="lightbox" data-glightbox="description: .lightbox-desc-2" data-gallery="quarto-lightbox-gallery-2"><img src="Resources/newrepo-empty.webp" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-newrepo-empty-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Creating a new repository (empty)
</figcaption>
</figure>
</div>
<p>Figure <a href="#fig-newrepo-filled">Creating a new repository (filled)</a> shows the page with the new repository information. Click on the <code>Create repository</code> button (5) to create the repository.</p>
<div id="fig-newrepo-filled" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-newrepo-filled-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Resources/newrepo-filled.webp" class="lightbox" data-glightbox="description: .lightbox-desc-3" data-gallery="quarto-lightbox-gallery-3"><img src="Resources/newrepo-filled.webp" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-newrepo-filled-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Creating a new repository (filled)
</figcaption>
</figure>
</div>
<p>The repository is created and the browser should show its basic information. Now we need to set up a page based on this repository. Click on the <code>Settings</code> option (6) in Figure <a href="#fig-repocreated2">GitHub page showing the new repository</a>.</p>
<div id="fig-repocreated2" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-repocreated2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Resources/repocreated2.webp" class="lightbox" data-glightbox="description: .lightbox-desc-4" data-gallery="quarto-lightbox-gallery-4"><img src="Resources/repocreated2.webp" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-repocreated2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: GitHub page showing the new repository
</figcaption>
</figure>
</div>
<p>That will bring a page where we can set options for the repository (Figure <a href="#fig-settings">Settings for the repository</a>). On the left menu, select <code>Pages</code> (7).</p>
<div id="fig-settings" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-settings-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Resources/settings.webp" class="lightbox" data-glightbox="description: .lightbox-desc-5" data-gallery="quarto-lightbox-gallery-5"><img src="Resources/settings.webp" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-settings-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Settings for the repository
</figcaption>
</figure>
</div>
<p>In the <code>Source</code> section (8) chose <code>Deploy from a branch</code>, and for <code>Branch</code> select <code>main</code> and for <code>folder</code> choose <code>docs/</code>. Options should look like the ones in the figure below. Click on <code>Save</code> (9) (see Figure <a href="#fig-pages">Page settings for the repository</a>).</p>
<div id="fig-pages" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-pages-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Resources/pages.webp" class="lightbox" data-glightbox="description: .lightbox-desc-6" data-gallery="quarto-lightbox-gallery-6"><img src="Resources/pages.webp" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pages-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: Page settings for the repository
</figcaption>
</figure>
</div>
<p>Clicking on the repository name should bring you back to the main repository window.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In this example the GitHub user name is <code>rafaeldcsantos</code> and the repository is <code>SharingNotebooks</code>. These are used to compose the remote repository URL: <code>https://github.com/rafaeldcsantos/SharingNotebooks.git</code>. Yours of course will be different; please keep this in mind when creating a repository under your GitHub account.</p>
</div>
</div>
</section>
<section id="cloning-to-a-local-directory" class="level1">
<h1>Cloning to a local directory</h1>
<p>The steps to clone the project to a local directory are:</p>
<ol type="1">
<li>Make sure your GitHub account allows authentication via ssh: run <code>ssh -T git@github.com</code> and see if the output message mentions your username.</li>
<li>Change to a base directory, e.g.&nbsp;the one where you keep your projects.</li>
<li>Create a local directory with the same name as your repository (<code>SharingNotebooks</code>)</li>
<li>Change to this directory.</li>
<li>Run <code>git clone https://github.com/rafaeldcsantos/SharingNotebooks.git .</code> – make sure you have the dot (<code>.</code>) at the end of the command, and use <strong>your</strong> remote repository URL. If this command is successfull, the files <code>LICENSE</code> and <code>README.md</code>, which were created when we created the repository, will be downloaded to the current directory.</li>
</ol>
</section>
<section id="updating-the-local-files" class="level1">
<h1>Updating the local files</h1>
<ol type="1">
<li>Run the command <code>touch .nojekyll</code> or similar – this will create an empty file named <code>.nojekyll</code> to avoid some automation processes on GitHub.</li>
<li>Edit the <code>README.md</code> just to make some noticeable changes.</li>
<li>Run <code>git add .</code> to prepare all new and modified files (but not the deleted files) to upload to GitHub.</li>
<li>Run <code>git commit -m "Your commit message here"</code> to commit the changes with a comment.</li>
<li>Run <code>git remote set-url origin git@github.com:rafaeldcsantos/SharingNotebooks.git</code> – this will update the URL of the remote repository named origin to the specified URL. This command will allow you to push changes to GitHub using ssh.<br> Make sure you use your username and repository name!</li>
<li>Run <code>git push -u origin main</code> to push the changes to GitHub.</li>
<li>Check your repository in GitHub for the changes you did in the file <code>README.md</code>.</li>
</ol>
<p>From that point on, all changes you do to any file in the work directory can be updated with:</p>
<ol type="1">
<li><code>git add .</code></li>
<li><code>git commit -m "Add a comment here"</code></li>
<li><code>git push origin main</code></li>
</ol>
</section>
<section id="creating-a-quarto-document" class="level1">
<h1>Creating a Quarto Document</h1>
<p>Use Visual Code Studio to create a file with extension <code>.qmd</code> in the directory we ran the git commands. The <code>.qmd</code> file is a pure text file; any editor could be used, I recommend Visual Code Studio since it is a good, free IDE which integrates nicely with Quarto.</p>
<p>Create the file with the menu option <code>File</code>/<code>New File</code>/<code>Quarto Document</code>. A simple boilerplate file will be created.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Quarto can be used to create complex multi-document HTML pages, interactive notebooks, even presentations. Please refer to <a href="https://quarto.org/docs/guide/">its guide</a> for examples. For this example we will create a simple page using <a href="https://quarto.org/docs/authoring/markdown-basics.html">Markdown</a> and Quarto extensions.</p>
</div>
</div>
<p>Add some Markdown code to the file and save it with a descriptive filename (in our example, <code>Intro.qmd</code>) – the <code>.qmd</code> extension is used for Quarto Markdown files, a variant of Markdown that is specifically designed to work with Quarto.</p>
<p>Quarto files will be converted to HTML (HyperText Markup Language), which is the markup language for documents that will be displayed in web browsers. In most cases we can to provide additional instructions on how the files will be converted through instructions in a <code>_quarto.yml</code> file.</p>
<p>Create a <code>_quarto.yml</code> in the same directory where the <code>Intro.qmd</code> is located. Its contents should be:</p>
<pre><code>project:
  output-dir: docs</code></pre>
<p>These instructions basically ensure that all results from the conversion will be stored in the directory <code>docs</code> under the working directory. This is the same directory we used as the destination directory for the pages we’ve set up in GitHub (see Figure <a href="#fig-pages">Page settings for the repository</a>).</p>
<p>Now we need to convert this <code>.qmd</code> file to <code>.html</code> for displaying in a browser. In Visual Studio Code (see Figure <a href="#fig-runningquarto">Converting and displaying <code>.qmd</code> files in Visual Studio Code</a>) click on the <code>Preview</code> button (10). If all Quarto tools are installed correctly and there are no errors on the Markdown file it will be converted to HTML, and success or error messages will be displayed in the terminal (11) and rendered result displayed in the Preview window (12):</p>
<div id="fig-runningquarto" class="lightbox quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-runningquarto-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="Resources/VSCode.webp" class="lightbox" data-glightbox="description: .lightbox-desc-7" data-gallery="quarto-lightbox-gallery-7"><img src="Resources/VSCode.webp" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-runningquarto-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;7: Converting and displaying <code>.qmd</code> files in Visual Studio Code
</figcaption>
</figure>
</div>
</section>
<section id="pushing-it-back-to-github" class="level1">
<h1>Pushing it back to GitHub</h1>
<p>Now that we have the <code>.html</code> file generated from the <code>.qmd</code> file we need to push our project back to GitHub. Just run these commands:</p>
<ol type="1">
<li><code>git add .</code></li>
<li><code>git commit -m "Be sure to use meaningful comments"</code></li>
<li><code>git push origin main</code></li>
</ol>
<p>Now open the URL <a href="https://rafaeldcsantos.github.io/SharingNotebooks/Intro.html">https://rafaeldcsantos.github.io/SharingNotebooks/Intro.html</a> to see the rendered file as a GitHub page!</p>
</section>
<section id="in-case-of-problems" class="level1">
<h1>In case of problems</h1>
<p>Recheck the steps, and make sure you are using the right names for repositories, files and directories.</p>
<p>In this example the GitHub user name is <code>rafaeldcsantos</code> and the repository is <code>SharingNotebooks</code>. These are used to compose the remote repository URL: <code>https://github.com/rafaeldcsantos/SharingNotebooks.git</code>. We cloned the repository and added a local file named <code>Intro.qmd</code>, which was converted to <code>Intro.html</code> and stored in the directory <code>docs</code>. After pushing the local files to GitHub we can see the results in the URL <a href="https://rafaeldcsantos.github.io/SharingNotebooks/Intro.html">https://rafaeldcsantos.github.io/SharingNotebooks/Intro.html</a>.</p>
<div class="hidden" aria-hidden="true">
<span class="glightbox-desc lightbox-desc-1">Figure&nbsp;1: GitHub main window</span>
<span class="glightbox-desc lightbox-desc-2">Figure&nbsp;2: Creating a new repository (empty)</span>
<span class="glightbox-desc lightbox-desc-3">Figure&nbsp;3: Creating a new repository (filled)</span>
<span class="glightbox-desc lightbox-desc-4">Figure&nbsp;4: GitHub page showing the new repository</span>
<span class="glightbox-desc lightbox-desc-5">Figure&nbsp;5: Settings for the repository</span>
<span class="glightbox-desc lightbox-desc-6">Figure&nbsp;6: Page settings for the repository</span>
<span class="glightbox-desc lightbox-desc-7">Figure&nbsp;7: Converting and displaying <code>.qmd</code> files in Visual Studio Code</span>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"descPosition":"bottom","loop":false,"closeEffect":"zoom","openEffect":"zoom","selector":".lightbox"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>